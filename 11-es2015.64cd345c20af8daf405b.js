(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"3OEI":function(e,c,t){"use strict";t.r(c),t.d(c,"ModuleModule",function(){return A});var n=t("3Pt+"),a=t("PCNd"),b=t("tyNb"),o=t("ZXMZ"),i=t("Z8VL"),r=t("o+DB"),l=t("9UZh"),d=t("82i/"),s=t("vmnB"),u=t("9QbX"),f=t("fXoL"),p=t("jhN1"),m=t("ZzPI"),T=t("6t9p");let U=(()=>{class e extends i.a{constructor(e,c,t,n,a){super(e,t,n),this.raceService=c,this.titleService=a}ngOnInit(){this.titleService.setTitle(`${u.a} - Modules`),this.races=this.raceService.getEntities(),this.moduleTypes=d.a.values(r.b),super.ngOnInit()}calculateMaxEfficiency(e){if(null!=e.product&&null!=e.product.production){const c=e.product.production.map(e=>null==e.effects?null:e.effects.find(e=>e.type==s.a.work)).filter(e=>null!=e).map(e=>e.product);if(c.length>0)return 100*(1+Math.max(...c))}return 100}calculateMaxEfficiencyDisplay(e){if(null!=e.product){if(null!=e.product.production){const c=e.product.production.map(e=>null==e.effects?null:e.effects.find(e=>e.type==s.a.work)).filter(e=>null!=e).map(e=>e.product);if(c.length>0)return 100*(1+Math.max(...c))+"%"}return"100%"}return"-"}}return e.\u0275fac=function(c){return new(c||e)(f.Pb(o.a),f.Pb(l.a),f.Pb(b.c),f.Pb(b.a),f.Pb(p.c))},e.\u0275cmp=f.Jb({type:e,selectors:[["ng-component"]],features:[f.zb],decls:20,vars:16,consts:function(){let e;return e="\u7A7A\u95F4\u7AD9\u6A21\u5757",[[1,"row","content-row"],[1,"col-md-12"],[1,"card","shadow"],[1,"card-header","shadow-sm"],e,[1,"card-body"],["keyExpr","id",3,"dataSource","allowColumnReordering","allowColumnResizing","showBorders","hoverStateEnabled","onCellClick"],[3,"showPageSizeSelector","showNavigationButtons"],["mode","multiple"],[3,"applyFilter","visible"],[3,"visible"],["dataField","name","caption","Name"],["dataField","type","caption","Type"],[3,"dataSource"],["dataField","makerRace.id","caption","Race"],["valueExpr","id","displayExpr","name",3,"dataSource"],["dataField","product.name","caption","Product"],["caption","Max Efficiency","name","maxEfficiency",3,"calculateDisplayValue","calculateSortValue","allowSorting","allowFiltering"],["column","name","summaryType","count"]]},template:function(e,c){1&e&&(f.Ub(0,"div",0),f.Ub(1,"div",1),f.Ub(2,"div",2),f.Ub(3,"div",3),f.Yb(4,4),f.Tb(),f.Ub(5,"div",5),f.Ub(6,"dx-data-grid",6),f.hc("onCellClick",function(e){return c.onRowSelect(e)}),f.Qb(7,"dxo-pager",7),f.Qb(8,"dxo-sorting",8),f.Qb(9,"dxo-filter-row",9),f.Qb(10,"dxo-filter-panel",10),f.Qb(11,"dxi-column",11),f.Ub(12,"dxi-column",12),f.Qb(13,"dxo-lookup",13),f.Tb(),f.Ub(14,"dxi-column",14),f.Qb(15,"dxo-lookup",15),f.Tb(),f.Qb(16,"dxi-column",16),f.Qb(17,"dxi-column",17),f.Ub(18,"dxo-summary"),f.Qb(19,"dxi-total-item",18),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb()),2&e&&(f.Cb(6),f.pc("dataSource",c.entities)("allowColumnReordering",!0)("allowColumnResizing",!0)("showBorders",!0)("hoverStateEnabled",!0),f.Cb(1),f.pc("showPageSizeSelector",!0)("showNavigationButtons",!0),f.Cb(2),f.pc("applyFilter",c.currentFilter)("visible",!0),f.Cb(1),f.pc("visible",!0),f.Cb(3),f.pc("dataSource",c.moduleTypes),f.Cb(2),f.pc("dataSource",c.races),f.Cb(2),f.pc("calculateDisplayValue",c.calculateMaxEfficiencyDisplay)("calculateSortValue",c.calculateMaxEfficiency)("allowSorting",!0)("allowFiltering",!0))},directives:[m.a,T.Y,T.jb,T.E,T.C,T.b,T.S,T.mb,T.l],encapsulation:2}),e})();var g=t("Lswn"),y=t("6mEA"),C=t("ofXK");function w(e,c){if(1&e&&(f.Ub(0,"div",27),f.Ub(1,"label",28),f.Ec(2),f.Tb(),f.Tb()),2&e){const e=f.jc(3);f.Cb(2),f.Fc(e.entity.description)}}const h=function(e){return["/races",e]};function v(e,c){if(1&e&&(f.Ub(0,"span"),f.Ub(1,"a",29),f.Ec(2),f.Tb(),f.Tb()),2&e){const e=f.jc(3);f.Cb(1),f.pc("routerLink",f.sc(2,h,e.entity.makerRace.id)),f.Cb(1),f.Fc(e.entity.makerRace.name)}}function E(e,c){1&e&&(f.Ub(0,"span"),f.Ec(1," - "),f.Tb())}function x(e,c){if(1&e&&(f.Ub(0,"span"),f.Ec(1),f.Tb()),2&e){const e=f.jc(3);f.Cb(1),f.Fc(e.entity.type)}}function F(e,c){1&e&&(f.Ub(0,"span"),f.Ec(1," - "),f.Tb())}const S=function(e){return["/wares/",e]};function k(e,c){if(1&e&&(f.Ub(0,"span"),f.Ub(1,"a",29),f.Ec(2),f.Tb(),f.Tb()),2&e){const e=f.jc(3);f.Cb(1),f.pc("routerLink",f.sc(2,S,e.entity.product.id)),f.Cb(1),f.Fc(e.entity.product.name)}}function z(e,c){1&e&&(f.Ub(0,"span"),f.Ec(1," - "),f.Tb())}function $(e,c){if(1&e&&(f.Sb(0),f.Ub(1,"dt",12),f.Ub(2,"span"),f.Yb(3,30),f.Tb(),f.Ec(4),f.Tb(),f.Ub(5,"dd",14),f.Ec(6),f.kc(7,"number"),f.Tb(),f.Rb()),2&e){const e=f.jc(3);f.Cb(4),f.Gc(" (",null==e.entity.cargo.type?null:e.entity.cargo.type.name,")"),f.Cb(2),f.Fc(f.lc(7,2,e.entity.cargo.max))}}function I(e,c){if(1&e&&(f.Ub(0,"span"),f.Ec(1),f.kc(2,"number"),f.Tb()),2&e){const e=f.jc(3);f.Cb(1),f.Fc(f.lc(2,1,e.entity.explosionDamage))}}function M(e,c){1&e&&(f.Ub(0,"span"),f.Ec(1," - "),f.Tb())}function P(e,c){if(1&e&&(f.Sb(0),f.Ub(1,"dt",12),f.Yb(2,31),f.Tb(),f.Ub(3,"dd",14),f.Ec(4),f.Tb(),f.Rb()),2&e){const e=f.jc(3);f.Cb(4),f.Fc(e.entity.workForce.max)}}function Y(e,c){if(1&e&&(f.Sb(0),f.Ub(1,"dt",12),f.Yb(2,32),f.Tb(),f.Ub(3,"dd",14),f.Ec(4),f.Tb(),f.Rb()),2&e){const e=f.jc(3);f.Cb(4),f.Fc(e.entity.workForce.capacity)}}const j=function(e){return["/factions/",e]};function R(e,c){if(1&e&&(f.Ub(0,"li"),f.Ub(1,"a",29),f.Ec(2),f.Tb(),f.Tb()),2&e){const e=c.$implicit;f.Cb(1),f.pc("routerLink",f.sc(2,j,e.id)),f.Cb(1),f.Fc(e.name)}}function O(e,c){if(1&e&&(f.Ub(0,"tr"),f.Ub(1,"td"),f.Ec(2),f.Ub(3,"a",29),f.Ec(4),f.Tb(),f.Tb(),f.Ub(5,"td",45),f.Ec(6),f.kc(7,"number"),f.Tb(),f.Ub(8,"td",45),f.Ec(9),f.kc(10,"number"),f.Tb(),f.Ub(11,"td",45),f.Ec(12),f.kc(13,"number"),f.Tb(),f.Tb()),2&e){const e=c.$implicit;f.Cb(2),f.Gc(" ",e.amount," x "),f.Cb(1),f.pc("routerLink",f.sc(12,S,e.ware.id)),f.Cb(1),f.Fc(e.ware.name),f.Cb(2),f.Fc(f.lc(7,6,e.amount*e.ware.price.min)),f.Cb(3),f.Fc(f.lc(10,8,e.amount*e.ware.price.max)),f.Cb(3),f.Fc(f.lc(13,10,e.amount*e.ware.price.avg))}}function N(e,c){if(1&e&&(f.Ub(0,"div",10),f.Ub(1,"div",41),f.Ub(2,"h6"),f.Yb(3,46),f.Tb(),f.Ub(4,"table",43),f.Ub(5,"thead"),f.Ub(6,"tr"),f.Ub(7,"th"),f.Yb(8,47),f.Tb(),f.Ub(9,"th",45),f.Yb(10,48),f.Tb(),f.Ub(11,"th",45),f.Yb(12,49),f.Tb(),f.Ub(13,"th",45),f.Yb(14,50),f.Tb(),f.Tb(),f.Tb(),f.Ub(15,"tbody"),f.Cc(16,O,14,14,"tr",22),f.Tb(),f.Ub(17,"tfoot"),f.Ub(18,"tr"),f.Ub(19,"th",45),f.Yb(20,51),f.Tb(),f.Ub(21,"th",45),f.Ec(22),f.kc(23,"number"),f.Tb(),f.Ub(24,"th",45),f.Ec(25),f.kc(26,"number"),f.Tb(),f.Ub(27,"th",45),f.Ec(28),f.kc(29,"number"),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb()),2&e){const e=f.jc().$implicit,c=f.jc(4);f.Cb(16),f.pc("ngForOf",e.wares),f.Cb(6),f.Fc(f.lc(23,4,c.getTotalMin(e))),f.Cb(3),f.Fc(f.lc(26,6,c.getTotalMax(e))),f.Cb(3),f.Fc(f.lc(29,8,c.getTotalAvg(e)))}}function Q(e,c){if(1&e&&(f.Ub(0,"div",35),f.Ub(1,"div",36),f.Ub(2,"div",37),f.Ub(3,"span"),f.Yb(4,38),f.Tb(),f.Ec(5,": "),f.Ub(6,"em"),f.Ec(7),f.Tb(),f.Tb(),f.Ub(8,"div",39),f.Cc(9,N,30,10,"div",40),f.Ub(10,"div",10),f.Ub(11,"div",41),f.Ub(12,"h6"),f.Yb(13,42),f.Tb(),f.Ub(14,"table",43),f.Ub(15,"tbody"),f.Ub(16,"tr"),f.Ub(17,"td"),f.Yb(18,44),f.Tb(),f.Ub(19,"td",45),f.Ec(20),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb()),2&e){const e=c.$implicit,t=f.jc(4);f.Cb(7),f.Fc(e.name),f.Cb(2),f.pc("ngIf",e.wares.length),f.Cb(11),f.Fc(t.getProductionTime(e.time))}}function D(e,c){if(1&e&&(f.Ub(0,"div",33),f.Cc(1,Q,21,3,"div",34),f.Tb()),2&e){const e=f.jc(3);f.Cb(1),f.pc("ngForOf",e.entityProduction)}}function L(e,c){if(1&e&&(f.Ub(0,"div",8),f.Cc(1,w,3,1,"div",9),f.Ub(2,"div",10),f.Ub(3,"div",11),f.Ub(4,"dl",10),f.Ub(5,"dt",12),f.Yb(6,13),f.Tb(),f.Ub(7,"dd",14),f.Cc(8,v,3,4,"span",15),f.Cc(9,E,2,0,"span",15),f.Tb(),f.Ub(10,"dt",12),f.Yb(11,16),f.Tb(),f.Ub(12,"dd",14),f.Cc(13,x,2,1,"span",15),f.Cc(14,F,2,0,"span",15),f.Tb(),f.Ub(15,"dt",12),f.Yb(16,17),f.Tb(),f.Ub(17,"dd",14),f.Cc(18,k,3,4,"span",15),f.Cc(19,z,2,0,"span",15),f.Tb(),f.Cc(20,$,8,4,"ng-container",15),f.Ub(21,"dt",12),f.Yb(22,18),f.Tb(),f.Ub(23,"dd",14),f.Ec(24),f.kc(25,"number"),f.Tb(),f.Ub(26,"dt",12),f.Yb(27,19),f.Tb(),f.Ub(28,"dd",14),f.Cc(29,I,3,3,"span",15),f.Cc(30,M,2,0,"span",15),f.Tb(),f.Cc(31,P,5,1,"ng-container",15),f.Cc(32,Y,5,1,"ng-container",15),f.Ub(33,"dt",12),f.Yb(34,20),f.Tb(),f.Ub(35,"dd",14),f.Ub(36,"ul",21),f.Cc(37,R,3,4,"li",22),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Ub(38,"div",11),f.Ub(39,"div",23),f.Ub(40,"dl",10),f.Ub(41,"dt",12),f.Yb(42,24),f.Tb(),f.Ub(43,"dd",14),f.Ec(44),f.Tb(),f.Ub(45,"dt",12),f.Yb(46,25),f.Tb(),f.Ub(47,"dd",14),f.Ec(48),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Cc(49,D,2,1,"div",26),f.Tb()),2&e){const e=f.jc(2);f.Cb(1),f.pc("ngIf","No information available"!=e.entity.description),f.Cb(7),f.pc("ngIf",e.entity.makerRace),f.Cb(1),f.pc("ngIf",!e.entity.makerRace),f.Cb(4),f.pc("ngIf",e.entity.type),f.Cb(1),f.pc("ngIf",!e.entity.type),f.Cb(4),f.pc("ngIf",e.entity.product),f.Cb(1),f.pc("ngIf",!e.entity.product),f.Cb(1),f.pc("ngIf",e.entity.cargo),f.Cb(4),f.Fc(f.lc(25,17,e.entity.hull)),f.Cb(5),f.pc("ngIf",e.entity.explosionDamage),f.Cb(1),f.pc("ngIf",!e.entity.explosionDamage),f.Cb(1),f.pc("ngIf",null==e.entity.workForce?null:e.entity.workForce.max),f.Cb(1),f.pc("ngIf",null==e.entity.workForce?null:e.entity.workForce.capacity),f.Cb(5),f.pc("ngForOf",e.entity.owners),f.Cb(7),f.Fc(e.getSlotsStr(e.entity.turrets)),f.Cb(4),f.Fc(e.getSlotsStr(e.entity.shields)),f.Cb(1),f.pc("ngIf",e.entityProduction&&e.entityProduction.length)}}function B(e,c){if(1&e&&(f.Ub(0,"div",3),f.Ub(1,"div",4),f.Ub(2,"a",5),f.Yb(3,6),f.Tb(),f.Ec(4),f.Tb(),f.Cc(5,L,50,19,"div",7),f.Tb()),2&e){const e=f.jc();f.Cb(4),f.Gc(" - ",e.entity.name," "),f.Cb(1),f.pc("ngIf",e.entity)}}let V=(()=>{class e extends y.a{constructor(e,c,t,n){super(c,t),this.wareService=e,this.titleService=n}ngOnInit(){this.titleService.setTitle(`${u.a} - Modules`),super.ngOnInit()}onEntityLoaded(e){this.titleService.setTitle(`${u.a} - Modules - ${this.entity.name}`),this.entityProduction=this.entity.production.map(e=>({amount:e.amount,effects:e.effects,method:e.method,name:e.name,time:e.time,wares:e.wares.map(e=>({ware:this.wareService.getEntity(e.ware),amount:e.amount}))}))}getTotalMin(e){let c=0;return e.wares.forEach(e=>{c+=e.amount*e.ware.price.min}),c}getTotalMax(e){let c=0;return e.wares.forEach(e=>{c+=e.amount*e.ware.price.max}),c}getTotalAvg(e){let c=0;return e.wares.forEach(e=>{c+=e.amount*e.ware.price.avg}),c}getProductionTime(e){const c=Math.trunc(e/60),t=e-60*c;let n="";return c>0&&(n+=c+(1===c?" minute":" minutes")),t>0&&(c>0&&(n+=" "),n+=t+(1===t?" second":" seconds")),n}getSlotsStr(e){const c=this.getSlots(e);return 0==c.length?"-":c.map(e=>`${e.capacity} x ${e.size}`).join(", ")}getSlots(e){if(!e)return[];const c=e.reduce((e,c)=>(e[c.size]=e[c.size]||0,e[c.size]+=c.capacity||1,e),{}),t=[];return Object.keys(c).forEach(e=>{t.push({size:e,capacity:c[e]})}),t}}return e.\u0275fac=function(c){return new(c||e)(f.Pb(g.a),f.Pb(o.a),f.Pb(b.a),f.Pb(p.c))},e.\u0275cmp=f.Jb({type:e,selectors:[["ng-component"]],features:[f.zb],decls:3,vars:1,consts:function(){let e,c,t,n,a,b,o,i,r,l,d,s,u,f,p,m,T,U,g,y,C;return e="\u7A7A\u95F4\u7AD9\u6A21\u5757",c="\u79CD\u65CF",t="\u7C7B\u578B",n="\u4EA7\u54C1",a="\u8239\u4F53",b="\u7206\u70B8\u4F24\u5BB3",o="\u62E5\u6709\u8005",i="\u70AE\u5854",r="\u62A4\u76FE",l="\u5B58\u50A8\u5BB9\u91CF",d="\u52B3\u52A8\u529B\u9700\u6C42",s="\u52B3\u52A8\u529B\u50A8\u5907\u91CF",u="\u4EA7\u54C1",f="\u4EA7\u54C1",p="\u65F6\u95F4",m="\u9700\u6C42",T="\u8D44\u6E90",U="\u6700\u5C0F\u503C",g="\u6700\u5927\u503C",y="\u5E73\u5747\u503C",C="\u5408\u8BA1:",[[1,"row","content-row"],[1,"col-md-12"],["class","card shadow",4,"ngIf"],[1,"card","shadow"],[1,"card-header","shadow-sm"],["routerLink","/modules"],e,["class","card-body small",4,"ngIf"],[1,"card-body","small"],["class","form-group row",4,"ngIf"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"col-5"],c,[1,"col-7"],[4,"ngIf"],t,n,a,b,o,[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"col-md-4","col-sm-12"],i,r,["class","row mt-2 mb-2",4,"ngIf"],[1,"form-group","row"],[1,"col","col-form-label","col-form-label-sm"],[3,"routerLink"],l,d,s,[1,"row","mt-2","mb-2"],["class","col-md-6 col-sm-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-6","col-lg-4"],[1,"card","shadow-sm"],[1,"card-header"],u,[1,"card-body"],["class","row",4,"ngIf"],[1,"col"],f,[1,"table","table-sm"],p,[1,"text-right"],m,T,U,g,y,C]},template:function(e,c){1&e&&(f.Ub(0,"div",0),f.Ub(1,"div",1),f.Cc(2,B,6,2,"div",2),f.Tb(),f.Tb()),2&e&&(f.Cb(2),f.pc("ngIf",c.entity))},directives:[C.l,b.e,C.k],pipes:[C.d],encapsulation:2}),e})(),Z=(()=>{class e{}return e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=f.Nb({type:e}),e.\u0275inj=f.Mb({imports:[[b.f.forChild([{path:"",component:U},{path:":id",component:V}])],b.f]}),e})(),A=(()=>{class e{}return e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=f.Nb({type:e}),e.\u0275inj=f.Mb({imports:[[C.b,n.c,a.a,m.b,Z]]}),e})()}}]);