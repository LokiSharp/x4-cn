!function(){var e,t,n,c,a,r,o,i,b,l,u,f,d,s,p,m,y,v,T,g,U,h;function w(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function C(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,c=new Array(t);n<t;n++)c[n]=e[n];return c}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function x(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}function F(e,t,n){return(F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var c=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(c){var a=Object.getOwnPropertyDescriptor(c,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,c=I(e);if(t){var a=I(this).constructor;n=Reflect.construct(c,arguments,a)}else n=c.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"3OEI":function(E,S,z){"use strict";z.r(S),z.d(S,"ModuleModule",function(){return ke});var P,M=z("3Pt+"),$=z("PCNd"),R=z("tyNb"),Y=z("ZXMZ"),A=z("Z8VL"),D=z("o+DB"),N=z("9UZh"),Q=z("82i/"),L=z("vmnB"),B=z("9QbX"),_=z("fXoL"),V=z("jhN1"),Z=z("ZzPI"),J=z("6t9p"),X=((P=function(e){j(n,e);var t=O(n);function n(e,c,a,r,o){var i;return k(this,n),(i=t.call(this,e,a,r)).raceService=c,i.titleService=o,i}return x(n,[{key:"ngOnInit",value:function(){this.titleService.setTitle("".concat(B.a," - Modules")),this.races=this.raceService.getEntities(),this.moduleTypes=Q.a.values(D.b),F(I(n.prototype),"ngOnInit",this).call(this)}},{key:"calculateMaxEfficiency",value:function(e){if(null!=e.product&&null!=e.product.production){var t=e.product.production.map(function(e){return null==e.effects?null:e.effects.find(function(e){return e.type==L.a.work})}).filter(function(e){return null!=e}).map(function(e){return e.product});if(t.length>0)return 100*(1+Math.max.apply(Math,C(t)))}return 100}},{key:"calculateMaxEfficiencyDisplay",value:function(e){if(null!=e.product){if(null!=e.product.production){var t=e.product.production.map(function(e){return null==e.effects?null:e.effects.find(function(e){return e.type==L.a.work})}).filter(function(e){return null!=e}).map(function(e){return e.product});if(t.length>0)return 100*(1+Math.max.apply(Math,C(t)))+"%"}return"100%"}return"-"}}]),n}(A.a)).\u0275fac=function(e){return new(e||P)(_.Pb(Y.a),_.Pb(N.a),_.Pb(R.c),_.Pb(R.a),_.Pb(V.c))},P.\u0275cmp=_.Jb({type:P,selectors:[["ng-component"]],features:[_.zb],decls:20,vars:16,consts:function(){return[[1,"row","content-row"],[1,"col-md-12"],[1,"card","shadow"],[1,"card-header","shadow-sm"],"\u7A7A\u95F4\u7AD9\u6A21\u5757",[1,"card-body"],["keyExpr","id",3,"dataSource","allowColumnReordering","allowColumnResizing","showBorders","hoverStateEnabled","onCellClick"],[3,"showPageSizeSelector","showNavigationButtons"],["mode","multiple"],[3,"applyFilter","visible"],[3,"visible"],["dataField","name","caption","Name"],["dataField","type","caption","Type"],[3,"dataSource"],["dataField","makerRace.id","caption","Race"],["valueExpr","id","displayExpr","name",3,"dataSource"],["dataField","product.name","caption","Product"],["caption","Max Efficiency","name","maxEfficiency",3,"calculateDisplayValue","calculateSortValue","allowSorting","allowFiltering"],["column","name","summaryType","count"]]},template:function(e,t){1&e&&(_.Ub(0,"div",0),_.Ub(1,"div",1),_.Ub(2,"div",2),_.Ub(3,"div",3),_.Yb(4,4),_.Tb(),_.Ub(5,"div",5),_.Ub(6,"dx-data-grid",6),_.hc("onCellClick",function(e){return t.onRowSelect(e)}),_.Qb(7,"dxo-pager",7),_.Qb(8,"dxo-sorting",8),_.Qb(9,"dxo-filter-row",9),_.Qb(10,"dxo-filter-panel",10),_.Qb(11,"dxi-column",11),_.Ub(12,"dxi-column",12),_.Qb(13,"dxo-lookup",13),_.Tb(),_.Ub(14,"dxi-column",14),_.Qb(15,"dxo-lookup",15),_.Tb(),_.Qb(16,"dxi-column",16),_.Qb(17,"dxi-column",17),_.Ub(18,"dxo-summary"),_.Qb(19,"dxi-total-item",18),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&e&&(_.Cb(6),_.pc("dataSource",t.entities)("allowColumnReordering",!0)("allowColumnResizing",!0)("showBorders",!0)("hoverStateEnabled",!0),_.Cb(1),_.pc("showPageSizeSelector",!0)("showNavigationButtons",!0),_.Cb(2),_.pc("applyFilter",t.currentFilter)("visible",!0),_.Cb(1),_.pc("visible",!0),_.Cb(3),_.pc("dataSource",t.moduleTypes),_.Cb(2),_.pc("dataSource",t.races),_.Cb(2),_.pc("calculateDisplayValue",t.calculateMaxEfficiencyDisplay)("calculateSortValue",t.calculateMaxEfficiency)("allowSorting",!0)("allowFiltering",!0))},directives:[Z.a,J.Y,J.jb,J.E,J.C,J.b,J.S,J.mb,J.l],encapsulation:2}),P),G=z("Lswn"),q=z("6mEA"),W=z("ofXK");function H(e,t){if(1&e&&(_.Ub(0,"div",27),_.Ub(1,"label",28),_.Ec(2),_.Tb(),_.Tb()),2&e){var n=_.jc(3);_.Cb(2),_.Fc(n.entity.description)}}var K=function(e){return["/races",e]};function ee(e,t){if(1&e&&(_.Ub(0,"span"),_.Ub(1,"a",29),_.Ec(2),_.Tb(),_.Tb()),2&e){var n=_.jc(3);_.Cb(1),_.pc("routerLink",_.sc(2,K,n.entity.makerRace.id)),_.Cb(1),_.Fc(n.entity.makerRace.name)}}function te(e,t){1&e&&(_.Ub(0,"span"),_.Ec(1," - "),_.Tb())}function ne(e,t){if(1&e&&(_.Ub(0,"span"),_.Ec(1),_.Tb()),2&e){var n=_.jc(3);_.Cb(1),_.Fc(n.entity.type)}}function ce(e,t){1&e&&(_.Ub(0,"span"),_.Ec(1," - "),_.Tb())}var ae=function(e){return["/wares/",e]};function re(e,t){if(1&e&&(_.Ub(0,"span"),_.Ub(1,"a",29),_.Ec(2),_.Tb(),_.Tb()),2&e){var n=_.jc(3);_.Cb(1),_.pc("routerLink",_.sc(2,ae,n.entity.product.id)),_.Cb(1),_.Fc(n.entity.product.name)}}function oe(e,t){1&e&&(_.Ub(0,"span"),_.Ec(1," - "),_.Tb())}function ie(e,t){if(1&e&&(_.Sb(0),_.Ub(1,"dt",12),_.Ub(2,"span"),_.Yb(3,30),_.Tb(),_.Ec(4),_.Tb(),_.Ub(5,"dd",14),_.Ec(6),_.kc(7,"number"),_.Tb(),_.Rb()),2&e){var n=_.jc(3);_.Cb(4),_.Gc(" (",null==n.entity.cargo.type?null:n.entity.cargo.type.name,")"),_.Cb(2),_.Fc(_.lc(7,2,n.entity.cargo.max))}}function be(e,t){if(1&e&&(_.Ub(0,"span"),_.Ec(1),_.kc(2,"number"),_.Tb()),2&e){var n=_.jc(3);_.Cb(1),_.Fc(_.lc(2,1,n.entity.explosionDamage))}}function le(e,t){1&e&&(_.Ub(0,"span"),_.Ec(1," - "),_.Tb())}function ue(e,t){if(1&e&&(_.Sb(0),_.Ub(1,"dt",12),_.Yb(2,31),_.Tb(),_.Ub(3,"dd",14),_.Ec(4),_.Tb(),_.Rb()),2&e){var n=_.jc(3);_.Cb(4),_.Fc(n.entity.workForce.max)}}function fe(e,t){if(1&e&&(_.Sb(0),_.Ub(1,"dt",12),_.Yb(2,32),_.Tb(),_.Ub(3,"dd",14),_.Ec(4),_.Tb(),_.Rb()),2&e){var n=_.jc(3);_.Cb(4),_.Fc(n.entity.workForce.capacity)}}var de=function(e){return["/factions/",e]};function se(e,t){if(1&e&&(_.Ub(0,"li"),_.Ub(1,"a",29),_.Ec(2),_.Tb(),_.Tb()),2&e){var n=t.$implicit;_.Cb(1),_.pc("routerLink",_.sc(2,de,n.id)),_.Cb(1),_.Fc(n.name)}}function pe(e,t){if(1&e&&(_.Ub(0,"tr"),_.Ub(1,"td"),_.Ec(2),_.Ub(3,"a",29),_.Ec(4),_.Tb(),_.Tb(),_.Ub(5,"td",45),_.Ec(6),_.kc(7,"number"),_.Tb(),_.Ub(8,"td",45),_.Ec(9),_.kc(10,"number"),_.Tb(),_.Ub(11,"td",45),_.Ec(12),_.kc(13,"number"),_.Tb(),_.Tb()),2&e){var n=t.$implicit;_.Cb(2),_.Gc(" ",n.amount," x "),_.Cb(1),_.pc("routerLink",_.sc(12,ae,n.ware.id)),_.Cb(1),_.Fc(n.ware.name),_.Cb(2),_.Fc(_.lc(7,6,n.amount*n.ware.price.min)),_.Cb(3),_.Fc(_.lc(10,8,n.amount*n.ware.price.max)),_.Cb(3),_.Fc(_.lc(13,10,n.amount*n.ware.price.avg))}}function me(e,t){if(1&e&&(_.Ub(0,"div",10),_.Ub(1,"div",41),_.Ub(2,"h6"),_.Yb(3,46),_.Tb(),_.Ub(4,"table",43),_.Ub(5,"thead"),_.Ub(6,"tr"),_.Ub(7,"th"),_.Yb(8,47),_.Tb(),_.Ub(9,"th",45),_.Yb(10,48),_.Tb(),_.Ub(11,"th",45),_.Yb(12,49),_.Tb(),_.Ub(13,"th",45),_.Yb(14,50),_.Tb(),_.Tb(),_.Tb(),_.Ub(15,"tbody"),_.Cc(16,pe,14,14,"tr",22),_.Tb(),_.Ub(17,"tfoot"),_.Ub(18,"tr"),_.Ub(19,"th",45),_.Yb(20,51),_.Tb(),_.Ub(21,"th",45),_.Ec(22),_.kc(23,"number"),_.Tb(),_.Ub(24,"th",45),_.Ec(25),_.kc(26,"number"),_.Tb(),_.Ub(27,"th",45),_.Ec(28),_.kc(29,"number"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&e){var n=_.jc().$implicit,c=_.jc(4);_.Cb(16),_.pc("ngForOf",n.wares),_.Cb(6),_.Fc(_.lc(23,4,c.getTotalMin(n))),_.Cb(3),_.Fc(_.lc(26,6,c.getTotalMax(n))),_.Cb(3),_.Fc(_.lc(29,8,c.getTotalAvg(n)))}}function ye(e,t){if(1&e&&(_.Ub(0,"div",35),_.Ub(1,"div",36),_.Ub(2,"div",37),_.Ub(3,"span"),_.Yb(4,38),_.Tb(),_.Ec(5,": "),_.Ub(6,"em"),_.Ec(7),_.Tb(),_.Tb(),_.Ub(8,"div",39),_.Cc(9,me,30,10,"div",40),_.Ub(10,"div",10),_.Ub(11,"div",41),_.Ub(12,"h6"),_.Yb(13,42),_.Tb(),_.Ub(14,"table",43),_.Ub(15,"tbody"),_.Ub(16,"tr"),_.Ub(17,"td"),_.Yb(18,44),_.Tb(),_.Ub(19,"td",45),_.Ec(20),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&e){var n=t.$implicit,c=_.jc(4);_.Cb(7),_.Fc(n.name),_.Cb(2),_.pc("ngIf",n.wares.length),_.Cb(11),_.Fc(c.getProductionTime(n.time))}}function ve(e,t){if(1&e&&(_.Ub(0,"div",33),_.Cc(1,ye,21,3,"div",34),_.Tb()),2&e){var n=_.jc(3);_.Cb(1),_.pc("ngForOf",n.entityProduction)}}function Te(e,t){if(1&e&&(_.Ub(0,"div",8),_.Cc(1,H,3,1,"div",9),_.Ub(2,"div",10),_.Ub(3,"div",11),_.Ub(4,"dl",10),_.Ub(5,"dt",12),_.Yb(6,13),_.Tb(),_.Ub(7,"dd",14),_.Cc(8,ee,3,4,"span",15),_.Cc(9,te,2,0,"span",15),_.Tb(),_.Ub(10,"dt",12),_.Yb(11,16),_.Tb(),_.Ub(12,"dd",14),_.Cc(13,ne,2,1,"span",15),_.Cc(14,ce,2,0,"span",15),_.Tb(),_.Ub(15,"dt",12),_.Yb(16,17),_.Tb(),_.Ub(17,"dd",14),_.Cc(18,re,3,4,"span",15),_.Cc(19,oe,2,0,"span",15),_.Tb(),_.Cc(20,ie,8,4,"ng-container",15),_.Ub(21,"dt",12),_.Yb(22,18),_.Tb(),_.Ub(23,"dd",14),_.Ec(24),_.kc(25,"number"),_.Tb(),_.Ub(26,"dt",12),_.Yb(27,19),_.Tb(),_.Ub(28,"dd",14),_.Cc(29,be,3,3,"span",15),_.Cc(30,le,2,0,"span",15),_.Tb(),_.Cc(31,ue,5,1,"ng-container",15),_.Cc(32,fe,5,1,"ng-container",15),_.Ub(33,"dt",12),_.Yb(34,20),_.Tb(),_.Ub(35,"dd",14),_.Ub(36,"ul",21),_.Cc(37,se,3,4,"li",22),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(38,"div",11),_.Ub(39,"div",23),_.Ub(40,"dl",10),_.Ub(41,"dt",12),_.Yb(42,24),_.Tb(),_.Ub(43,"dd",14),_.Ec(44),_.Tb(),_.Ub(45,"dt",12),_.Yb(46,25),_.Tb(),_.Ub(47,"dd",14),_.Ec(48),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Cc(49,ve,2,1,"div",26),_.Tb()),2&e){var n=_.jc(2);_.Cb(1),_.pc("ngIf","No information available"!=n.entity.description),_.Cb(7),_.pc("ngIf",n.entity.makerRace),_.Cb(1),_.pc("ngIf",!n.entity.makerRace),_.Cb(4),_.pc("ngIf",n.entity.type),_.Cb(1),_.pc("ngIf",!n.entity.type),_.Cb(4),_.pc("ngIf",n.entity.product),_.Cb(1),_.pc("ngIf",!n.entity.product),_.Cb(1),_.pc("ngIf",n.entity.cargo),_.Cb(4),_.Fc(_.lc(25,17,n.entity.hull)),_.Cb(5),_.pc("ngIf",n.entity.explosionDamage),_.Cb(1),_.pc("ngIf",!n.entity.explosionDamage),_.Cb(1),_.pc("ngIf",null==n.entity.workForce?null:n.entity.workForce.max),_.Cb(1),_.pc("ngIf",null==n.entity.workForce?null:n.entity.workForce.capacity),_.Cb(5),_.pc("ngForOf",n.entity.owners),_.Cb(7),_.Fc(n.getSlotsStr(n.entity.turrets)),_.Cb(4),_.Fc(n.getSlotsStr(n.entity.shields)),_.Cb(1),_.pc("ngIf",n.entityProduction&&n.entityProduction.length)}}function ge(e,t){if(1&e&&(_.Ub(0,"div",3),_.Ub(1,"div",4),_.Ub(2,"a",5),_.Yb(3,6),_.Tb(),_.Ec(4),_.Tb(),_.Cc(5,Te,50,19,"div",7),_.Tb()),2&e){var n=_.jc();_.Cb(4),_.Gc(" - ",n.entity.name," "),_.Cb(1),_.pc("ngIf",n.entity)}}var Ue,he,we,Ce=((we=function(e){j(n,e);var t=O(n);function n(e,c,a,r){var o;return k(this,n),(o=t.call(this,c,a)).wareService=e,o.titleService=r,o}return x(n,[{key:"ngOnInit",value:function(){this.titleService.setTitle("".concat(B.a," - Modules")),F(I(n.prototype),"ngOnInit",this).call(this)}},{key:"onEntityLoaded",value:function(e){var t=this;this.titleService.setTitle("".concat(B.a," - Modules - ").concat(this.entity.name)),this.entityProduction=this.entity.production.map(function(e){return{amount:e.amount,effects:e.effects,method:e.method,name:e.name,time:e.time,wares:e.wares.map(function(e){return{ware:t.wareService.getEntity(e.ware),amount:e.amount}})}})}},{key:"getTotalMin",value:function(e){var t=0;return e.wares.forEach(function(e){t+=e.amount*e.ware.price.min}),t}},{key:"getTotalMax",value:function(e){var t=0;return e.wares.forEach(function(e){t+=e.amount*e.ware.price.max}),t}},{key:"getTotalAvg",value:function(e){var t=0;return e.wares.forEach(function(e){t+=e.amount*e.ware.price.avg}),t}},{key:"getProductionTime",value:function(e){var t=Math.trunc(e/60),n=e-60*t,c="";return t>0&&(c+=t+(1===t?" minute":" minutes")),n>0&&(t>0&&(c+=" "),c+=n+(1===n?" second":" seconds")),c}},{key:"getSlotsStr",value:function(e){var t=this.getSlots(e);return 0==t.length?"-":t.map(function(e){return"".concat(e.capacity," x ").concat(e.size)}).join(", ")}},{key:"getSlots",value:function(e){if(!e)return[];var t=e.reduce(function(e,t){return e[t.size]=e[t.size]||0,e[t.size]+=t.capacity||1,e},{}),n=[];return Object.keys(t).forEach(function(e){n.push({size:e,capacity:t[e]})}),n}}]),n}(q.a)).\u0275fac=function(e){return new(e||we)(_.Pb(G.a),_.Pb(Y.a),_.Pb(R.a),_.Pb(V.c))},we.\u0275cmp=_.Jb({type:we,selectors:[["ng-component"]],features:[_.zb],decls:3,vars:1,consts:function(){return[[1,"row","content-row"],[1,"col-md-12"],["class","card shadow",4,"ngIf"],[1,"card","shadow"],[1,"card-header","shadow-sm"],["routerLink","/modules"],"\u7A7A\u95F4\u7AD9\u6A21\u5757",["class","card-body small",4,"ngIf"],[1,"card-body","small"],["class","form-group row",4,"ngIf"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"col-5"],"\u79CD\u65CF",[1,"col-7"],[4,"ngIf"],"\u7C7B\u578B","\u4EA7\u54C1","\u8239\u4F53","\u7206\u70B8\u4F24\u5BB3","\u62E5\u6709\u8005",[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"col-md-4","col-sm-12"],"\u70AE\u5854","\u62A4\u76FE",["class","row mt-2 mb-2",4,"ngIf"],[1,"form-group","row"],[1,"col","col-form-label","col-form-label-sm"],[3,"routerLink"],"\u5B58\u50A8\u5BB9\u91CF","\u52B3\u52A8\u529B\u9700\u6C42","\u52B3\u52A8\u529B\u50A8\u5907\u91CF",[1,"row","mt-2","mb-2"],["class","col-md-6 col-sm-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-6","col-lg-4"],[1,"card","shadow-sm"],[1,"card-header"],"\u4EA7\u54C1",[1,"card-body"],["class","row",4,"ngIf"],[1,"col"],"\u4EA7\u54C1",[1,"table","table-sm"],"\u65F6\u95F4",[1,"text-right"],"\u9700\u6C42","\u8D44\u6E90","\u6700\u5C0F\u503C","\u6700\u5927\u503C","\u5E73\u5747\u503C","\u5408\u8BA1:"]},template:function(e,t){1&e&&(_.Ub(0,"div",0),_.Ub(1,"div",1),_.Cc(2,ge,6,2,"div",2),_.Tb(),_.Tb()),2&e&&(_.Cb(2),_.pc("ngIf",t.entity))},directives:[W.l,R.e,W.k],pipes:[W.d],encapsulation:2}),we),Ee=((he=function e(){k(this,e)}).\u0275fac=function(e){return new(e||he)},he.\u0275mod=_.Nb({type:he}),he.\u0275inj=_.Mb({imports:[[R.f.forChild([{path:"",component:X},{path:":id",component:Ce}])],R.f]}),he),ke=((Ue=function e(){k(this,e)}).\u0275fac=function(e){return new(e||Ue)},Ue.\u0275mod=_.Nb({type:Ue}),Ue.\u0275inj=_.Mb({imports:[[W.b,M.c,$.a,Z.b,Ee]]}),Ue)}}])}();